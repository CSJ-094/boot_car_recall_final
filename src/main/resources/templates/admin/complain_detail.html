<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>고객 문의 상세</title>
    <th:block layout:fragment="css">
        <style>
            .admin-container {
                max-width: 1200px;
                margin: 20px auto;
                padding: 30px;
            }
            .detail-item {
                margin-bottom: 1rem;
            }
            .detail-content-box {
                white-space: pre-wrap;
                padding: 15px;
                border-radius: 5px;
                min-height: 150px;
                border: 1px solid #dee2e6;
            }
        </style>
    </th:block>
</head>
<div layout:fragment="content">
    <div class="container admin-container" th:if="${complain != null}" th:object="${complain}">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 th:text="|고객 문의 상세 #${complain.report_id}|">고객 문의 상세</h3>
            <a th:href="@{/admin/complain/list}" class="btn btn-outline-secondary">목록으로</a>
        </div>
    
        <div class="row detail-item">
            <div class="col-md-2 detail-label">문의유형</div>
            <div class="col-md-10 font-weight-bold" th:text="*{complain_type}"></div>
        </div>
        <div class="row detail-item">
            <div class="col-md-2 detail-label">신고인</div>
            <div class="col-md-4 font-weight-bold" th:text="*{reporter_name}"></div>
            <div class="col-md-2 detail-label">작성일</div>
            <div class="col-md-4 font-weight-bold">
                <span th:text="${#dates.format(complain.complainDate, 'yyyy-MM-dd HH:mm')}"></span>
            </div>
        </div>
        <div class="row detail-item">
            <div class="col-md-2 detail-label">제목</div>
            <div class="col-md-10 font-weight-bold" th:text="*{title}"></div>
        </div>
        <div class="detail-item">
            <div class="row">
                <div class="col-md-2 detail-label">문의 내용</div>
                <div class="col-md-10 detail-content-box bg-light" th:text="*{content}"></div>
            </div>
        </div>
    
        <hr class="my-4">
    
        <div class="detail-item">
            <div class="row">
                <div class="col-md-2 detail-label">답변 내용</div>
                <div class="col-md-10 detail-content-box font-weight-bold" th:classappend="${#strings.isEmpty(answer)} ? 'text-muted'" th:text="*{answer} ?: '아직 등록된 답변이 없습니다.'"></div>
            </div>
        </div>
    
        <form th:action="@{/admin/complain/answer}" method="post" class="mt-4">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <input type="hidden" name="report_id" th:value="*{report_id}">
            <div class="form-group">
                <label for="answerTextarea">답변 등록 및 수정</label>
                <textarea id="answerTextarea" name="answer" class="form-control" rows="5" placeholder="답변을 입력하세요..." th:text="*{answer}"></textarea>
            </div>
            <div class="text-right">
                <button type="submit" class="btn btn-primary">답변 저장</button>
            </div>
        </form>
    </div>
</div>
</html>